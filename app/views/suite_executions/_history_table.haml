//
//  @Authors:
//      Brizuela Lucia                  lula.brizuela@gmail.com
//      Guerra Brenda                   brenda.guerra.7@gmail.com
//      Crosa Fernando                  fernandocrosa@hotmail.com
//      Branciforte Horacio             horaciob@gmail.com
//      Luna Juan                       juancluna@gmail.com
//
//  @copyright (C) 2010 MercadoLibre S.R.L
//
//
//  @license        GNU/GPL, see license.txt
//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the GNU General Public License as published by
//  the Free Software Foundation, either version 3 of the License, or
//  (at your option) any later version.
//
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//  GNU General Public License for more details.
//
//  You should have received a copy of the GNU General Public License
//  along with this program.  If not, see http://www.gnu.org/licenses/.
//
= calendar_date_select_includes "blue"
= stylesheet_link_tag 'blue.css'
-javascript 'tabla_suiteExe_editable'
-javascript 'tablesort'

%script
  //Tabla editable
  function onload(){
  iniciarTabla();
  }
  //marked file
  var marcado  = ""; 
  var anterior = "";
  var color_anterior = "";
  
-if suite_executions.empty? && params[:filter].nil?
  %h2{:style=>"text-align:center;margin-top:10%;"}
    %i
      =_('No Executions')
      
-elsif suite_executions.empty? && !params[:filter].nil?
  %h2{:style=>"text-align:center;margin-top:30px;"}
    %i
      =_("No results were found")
      
-else
  %div{:style=>"width:95%;"}
    -unless params.include? "filter"
      = will_paginate suite_executions
    -else
      = will_paginate suite_executions, :params => { 'filter' => filter}
  %div{ :style=>"clear: both;"}

  -form_tag({:action=>"get_report"},{:id=>"generar_pdf"}) do
    %table.detail{:id=>"executions",:name=>"table_zebra", :cellspacing=>0, :style=>"float:left;width:96%; margin-top:0px;"}
      %tr
        %th{:style=>"width:30px;", :class => "sortable"}
          %input{ :type => "checkbox", :id=>"seleccion",:name => 'todos',:value => "checkbox", :onChange => "ModificarTodos(this);", :style=>"margin:0px;"}
        %th{:style=>"width:30px;", :class => "sortable"}
          T
        %th{:style=>"min-width: 12%; max-width:12%;", :class => "sortable"}
          =_('Identifier')
        %th{:style=>"min-width: 40%; max-width:40%;", :class => "sortable"}
          =_('Name')
        %th{:style=>"min-width: 5%; max-width:10%;", :class => "sortable"}
          =_('User')
        %th{:class => "sortable"}
          =_('Date')
        %th{:class => "sortable"}
          =_('Duration')   
        %th{:style=>"min-width:12%;", :class => "sortable"}
          Configuration                
        %th{:class => "sortable"}
          Ok        
        %th{:style=>"min-width:6%;", :class => "sortable"}
          =_('Status')

      -suite_executions.each do |suite_execution|
        //verifies the name of the suite, or if an execution unit, the script
        -entity = (suite_execution.suite_id==0)? suite_execution.executions.first.circuit : suite_execution.suite
        -if entity
          =render :partial=>'history_table_row', :locals=>{:entity =>entity, :suite_execution=>suite_execution}
        -else
          %tr
            %td{:colspan=>"10"}
              ="Error  (Please, delete Suite execution #{suite_execution.id})"
 


