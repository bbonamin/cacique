//
// @Authors:    
//      Brizuela Lucia                  lula.brizuela@gmail.com
//      Guerra Brenda                   brenda.guerra.7@gmail.com
//      Crosa Fernando                  fernandocrosa@hotmail.com
//      Branciforte Horacio             horaciob@gmail.com
//      Luna Juan                       juancluna@gmail.com
//      
//  @copyright (C) 2010 MercadoLibre S.R.L
//
//
//  @license        GNU/GPL, see license.txt
//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the GNU General Public License as published by
//  the Free Software Foundation, either version 3 of the License, or
//  (at your option) any later version.
//
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//  GNU General Public License for more details.
//
//  You should have received a copy of the GNU General Public License
//  along with this program.  If not, see http://www.gnu.org/licenses/.
//

-if !delayed_jobs.empty?
  %table.detail
    %tr     
      %th
        =_("Project")   
      %th{:style=>"width:40%"}
        =_("Suite")                  
      %th
        =_("Programmed by")            
      %th
        =_("Schedule")
      %th
        =_("Status")     
      %th{:style=>"width:10px;"}              
    -delayed_jobs.each do |dj|
      %tr  
        %td{:title=>dj.task_program.project.name,:style=>"width:100px;"}
          =truncate( dj.task_program.project.name, :ommision => "...", :length => 80)               
        %td{:title=>dj.task_program.suite.name,:style=>"width:30%"}
          =truncate(dj.task_program.suite.name, :ommision => "...", :length => 80)             
        %td{:title=>dj.task_program.user.name,:style=>"width:100px;"}
          =truncate( dj.task_program.user.name, :ommision => "...", :length => 20)                 
        %td
          %div{:style=>"width:80%; margin:0 auto;"}
            %b{:style=>"width:90px;float:left;"}
              ="#{dj.run_at.day}/#{dj.run_at.mon}/#{dj.run_at.year}"  
            %b{:style=>"width:50px;float:left;"}
              ="#{dj.run_at.hour}:#{dj.run_at.min}"                      
            %div{:style=>"float:left;width:100px;"}
              =@weekly_trans[dj.run_at.strftime('%A')]                              
        %td 
          =dj.s_status
        %td{:style=>"width:10px;"}
          %img{:src=>'/images/icons/cross.png', :style=>'width:12px; height:12px ; cursor:pointer;margin:0 auto;;', :onclick=>"if(confirm(text_to_ask))location='/task_programs/delete/#{dj.id}';"}
-else
  %div{ :style=>"clear: both"}        
  %h2
    %i
      =_('Without Schedule')     
          
