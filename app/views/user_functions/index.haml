//
//  @Authors:
//      Brizuela Lucia                  lula.brizuela@gmail.com
//      Guerra Brenda                   brenda.guerra.7@gmail.com
//      Crosa Fernando                  fernandocrosa@hotmail.com
//      Branciforte Horacio             horaciob@gmail.com
//      Luna Juan                       juancluna@gmail.com
//
//  @copyright (C) 2010 MercadoLibre S.R.L
//
//
//  @license        GNU/GPL, see license.txt
//  This program is free software: you can redistribute it and/or modify
//  it under the terms of the GNU General Public License as published by
//  the Free Software Foundation, either version 3 of the License, or
//  (at your option) any later version.
//
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//  GNU General Public License for more details.
//
//  You should have received a copy of the GNU General Public License
//  along with this program.  If not, see http://www.gnu.org/licenses/.
//
-javascript 'user_function'

.main
  %h1
    =_('Functions')

  //Select Project
  #select_project_div{:style => "display:#{display};"}
    %form{ :url=>"user_functions",:id=> "form_filter"}
      =select("filter", "project_id", [[_('Generals'), 0]]  +  @projects.collect {|p| [ truncate(p.name, :ommision => "...", :length => 60), p.id ] }.sort!,{ :selected => (@project_id != "") ? @project_id.to_i: @project_id,:include_blank => _('Public')},{ :onchange=>"$j('#form_filter').submit();", :style => "width: 200px;"}) 
  
  //Table
  -if @user_functions.empty?
    %h2
      %i
        =_('This project has no specific functions')
  -else
    %div{ :style=>"float:right;"}
      = will_paginate @user_functions, :params => {:filter => {:text => @param_search, :project_id=> @project_id} }
    %br
    %br
    =render :partial => "functions", :locals => {:user_functions => @user_functions, :can_move => @can_move, :show_project=>false}

//Tools menu
-content_for :tools_menu do
  =render :partial =>"menu_user_function"


